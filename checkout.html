Perfect, Sir. Now I will update checkout.html so that it fetches all cart items from Firebase instead of localStorage. This ensures that all users (even temporary guest users) see their own cart items for checkout.

Here’s the fully updated checkout.html:

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MNU Collection - Checkout</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  background-color: black;
  background-image: url('https://images.pexels.com/photos/1662298/pexels-photo-1662298.jpeg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  color: white;
  margin: 0;
  font-family: Arial, sans-serif;
}
.overlay {
  background: rgba(0,0,0,0.75);
  min-height: 100vh;
}
header {
  text-align: center;
  padding: 20px;
  background: rgba(0,0,0,0.8);
}
nav {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 10px;
}
nav a {
  color: white;
  text-decoration: none;
  font-weight: bold;
}
.checkout-container {
  max-width: 800px;
  margin: 20px auto;
  padding: 20px;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
}
.checkout-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 15px;
  border-bottom: 1px solid #ddd;
  padding-bottom: 10px;
}
.checkout-item img {
  width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 6px;
  margin-right: 15px;
}
.checkout-item div {
  flex: 1;
}
.btn-action {
  background-color: #ff4500;
  color: white;
  padding: 8px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.btn-action:hover {
  background-color: #e03e00;
}
form input, form select, form textarea {
  width: 100%;
  padding: 8px;
  margin: 8px 0;
  border-radius: 5px;
  border: none;
}
</style>
</head>
<body>
<div class="overlay">
<header>
  <h1>Checkout - MNU Collection</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="cart.html">Cart</a>
  </nav>
</header>

<section class="checkout-container">
  <h2>Your Cart</h2>
  <div id="checkoutItems"></div>
  <h3 id="totalPrice"></h3>

  <h2>Billing Details</h2>
  <form id="checkoutForm">
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="tel" id="phone" placeholder="Phone Number" required>
    <input type="text" id="city" placeholder="City" required>
    <input type="text" id="house" placeholder="House/Street" required>
    <input type="text" id="pincode" placeholder="Pin Code" required>
    <button type="submit" class="btn-action">Place Order</button>
  </form>
</section>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getDatabase, ref, onValue, remove, push } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCQwYdtbUSM7WM25eNUzN4NxFXEvvRGN1k",
  authDomain: "mnu-collection-9282f.firebaseapp.com",
  databaseURL: "https://mnu-collection-9282f-default-rtdb.firebaseio.com",
  projectId: "mnu-collection-9282f",
  storageBucket: "mnu-collection-9282f.firebasestorage.app",
  messagingSenderId: "88757917123",
  appId: "1:88757917123:web:3b1f8f53654fee25089976",
  measurementId: "G-JW6LQER5TD"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Temporary User ID
let userId = localStorage.getItem('tempUserId');
if (!userId) {
  userId = "user_" + Math.random().toString(36).substr(2, 9);
  localStorage.setItem('tempUserId', userId);
}
const cartRef = ref(db, 'carts/' + userId);
const ordersRef = ref(db, 'orders');

// Display Cart Items
const checkoutItemsDiv = document.getElementById('checkoutItems');
const totalPriceEl = document.getElementById('totalPrice');

function displayCart(cartData) {
  checkoutItemsDiv.innerHTML = '';
  let total = 0;
  if(cartData){
    Object.values(cartData).forEach(product => {
      total += product.price * (product.quantity || 1);
      const div = document.createElement('div');
      div.className = 'checkout-item';
      div.innerHTML = `
        <img src="${product.image}" alt="${product.name}">
        <div>
          <h4>${product.name}</h4>
          <p>₹${product.price} x ${product.quantity || 1}</p>
        </div>
      `;
      checkoutItemsDiv.appendChild(div);
    });
  }
  totalPriceEl.textContent = Total: ₹${total};
}

// Listen to cart changes
onValue(cartRef, (snapshot) => {
  displayCart(snapshot.val());
});

// Handle form submission
document.getElementById('checkoutForm').addEventListener('submit', e => {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const phone = document.getElementById('phone').value;
  const city = document.getElementById('city').value;
  const house = document.getElementById('house').value;
  const pincode = document.getElementById('pincode').value;

  onValue(cartRef, (snapshot) => {
    const cartData = snapshot.val();
    if(!cartData) { alert('Cart is empty!'); return; }

    const order = {
      userId,
      name, email, phone, city, house, pincode,
      items: cartData,
      timestamp: Date.now(),
      paymentStatus: "Pending"
    };
    push(ordersRef, order);

    // Clear cart
    Object.keys(cartData).forEach(key => remove(ref(db, 'carts/' + userId + '/' + key)));
    alert('Order placed successfully!');
    window.location.href = 'index.html';
  }, {onlyOnce:true});
});
</script>
</body>
</html>

✅ What this does:

1. Loads cart items directly from Firebase for the current user.


2. Displays all products with price, quantity, and total.


3. Billing form includes Name, Email, Phone, City, House, Pin code.


4. On submit, pushes order to Firebase orders and clears the cart.


5. Works with temporary guest user ID so multiple users can checkout independently.




---

Sir, next step can be updating cart.html to also read/write from Firebase so the cart page matches shop.html and checkout.html.

Do you want me to update cart.html now?
